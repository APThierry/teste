(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{1840:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(9089)}])},6086:function(e,t,s){"use strict";let a;var l=s(7542);let n=(a||(a=(0,l.createPagesBrowserClient)()),a);t.Z=n},9089:function(e,t,s){"use strict";let a;s.r(t),s.d(t,{__N_SSP:function(){return o}});var l=s(5893),n=s(7294),r=s(1163),i=s(6086),o=!0;t.default=(a=function(e){let{user:t}=e,s=(0,r.useRouter)(),[a,o]=(0,n.useState)(t.full_name||""),[c,u]=(0,n.useState)(!1),[d,m]=(0,n.useState)("");(0,n.useEffect)(()=>{(async()=>{let e=await fetch("/api/profile");e.ok&&o((await e.json()).full_name||"")})()},[]);let x=async e=>{e.preventDefault(),u(!0),m("");try{if(!(await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({full_name:a})})).ok)throw Error("Nao foi possivel atualizar o perfil.");m("Perfil atualizado com sucesso.")}catch(e){m(e.message||"Erro ao atualizar o perfil.")}finally{u(!1)}},f=async()=>{await i.Z.auth.signOut(),s.replace("/login")},h=a||t.full_name||t.email;return(0,l.jsx)("div",{className:"min-h-screen bg-slate-100",children:(0,l.jsx)("div",{className:"mx-auto flex min-h-screen max-w-xl flex-col items-center justify-center px-6 py-12",children:(0,l.jsxs)("div",{className:"w-full rounded-3xl bg-white p-10 shadow-xl",children:[(0,l.jsxs)("div",{className:"mb-6 text-center",children:[(0,l.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-blue-100 text-blue-600",children:(0,l.jsx)("span",{className:"text-xl font-semibold",children:"/N"})}),(0,l.jsx)("h1",{className:"text-2xl font-semibold text-slate-900",children:"Bem-vindo"}),(0,l.jsxs)("p",{className:"text-sm text-slate-600",children:["Voce esta autenticado como ",h,"."]})]}),(0,l.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"fullName",className:"mb-2 block text-sm font-medium text-slate-700",children:"Nome completo"}),(0,l.jsx)("input",{id:"fullName",type:"text",value:a,onChange:e=>o(e.target.value),placeholder:"Atualize seu nome",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-slate-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"})]}),(0,l.jsx)("button",{type:"submit",disabled:c,className:"w-full rounded-lg bg-blue-600 px-4 py-2 text-white transition hover:bg-blue-500 disabled:bg-blue-400",children:c?"Salvando...":"Salvar"}),d&&(0,l.jsx)("p",{className:"text-center text-sm text-slate-600",children:d})]}),(0,l.jsxs)("div",{className:"mt-8 flex flex-col items-center gap-2 border-t border-slate-200 pt-6",children:[(0,l.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Sessao"}),(0,l.jsx)("button",{onClick:f,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:"Sair da conta"})]})]})})})},function(e){let t=(0,r.useRouter)(),[s,o]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{let e=!0;i.Z.auth.getSession().then(s=>{let{data:a}=s;e&&(a.session?o(!1):t.replace("/login"))});let{data:s}=i.Z.auth.onAuthStateChange((e,s)=>{s||t.replace("/login")});return()=>{e=!1,s.subscription.unsubscribe()}},[t]),s)?(0,l.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-slate-100",children:(0,l.jsx)("div",{className:"rounded-lg bg-white px-6 py-4 text-slate-600 shadow",children:"Carregando..."})}):(0,l.jsx)(a,{...e})})}},function(e){e.O(0,[895,888,774,179],function(){return e(e.s=1840)}),_N_E=e.O()}]);