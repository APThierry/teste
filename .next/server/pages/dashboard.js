(()=>{var e={};e.id=26,e.ids=[26,888,660],e.modules={1434:(e,t,s)=>{"use strict";s.r(t),s.d(t,{config:()=>N,default:()=>g,getServerSideProps:()=>j,getStaticPaths:()=>v,getStaticProps:()=>S,reportWebVitals:()=>P,routeModule:()=>q,unstable_getServerProps:()=>C,unstable_getServerSideProps:()=>I,unstable_getStaticParams:()=>_,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>w});var a,r={};s.r(r),s.d(r,{default:()=>b,getServerSideProps:()=>h});var i=s(7093),l=s(5244),n=s(1323),o=s(1777),u=s.n(o),c=s(3293),d=s(997),m=s(6689),p=s(1163),x=s(4130),f=s(1096);let h=async e=>{let t=(0,f.t)(e),{data:{session:s}}=await t.auth.getSession();if(!s)return{redirect:{destination:"/login",permanent:!1}};let{data:a}=await t.from("profiles").select("full_name").eq("id",s.user.id).maybeSingle();return{props:{initialSession:s,user:{id:s.user.id,email:s.user.email,full_name:a?.full_name||""}}}},b=(a=function({user:e}){let t=(0,p.useRouter)(),[s,a]=(0,m.useState)(e.full_name||""),[r,i]=(0,m.useState)(!1),[l,n]=(0,m.useState)("");(0,m.useEffect)(()=>{(async()=>{let e=await fetch("/api/profile");e.ok&&a((await e.json()).full_name||"")})()},[]);let o=async e=>{e.preventDefault(),i(!0),n("");try{if(!(await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({full_name:s})})).ok)throw Error("Nao foi possivel atualizar o perfil.");n("Perfil atualizado com sucesso.")}catch(e){n(e.message||"Erro ao atualizar o perfil.")}finally{i(!1)}},u=async()=>{await x.Z.auth.signOut(),t.replace("/login")},c=s||e.full_name||e.email;return d.jsx("div",{className:"min-h-screen bg-slate-100",children:d.jsx("div",{className:"mx-auto flex min-h-screen max-w-xl flex-col items-center justify-center px-6 py-12",children:(0,d.jsxs)("div",{className:"w-full rounded-3xl bg-white p-10 shadow-xl",children:[(0,d.jsxs)("div",{className:"mb-6 text-center",children:[d.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-blue-100 text-blue-600",children:d.jsx("span",{className:"text-xl font-semibold",children:"/N"})}),d.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Bem-vindo"}),(0,d.jsxs)("p",{className:"text-sm text-slate-600",children:["Voce esta autenticado como ",c,"."]})]}),(0,d.jsxs)("form",{onSubmit:o,className:"space-y-4",children:[(0,d.jsxs)("div",{children:[d.jsx("label",{htmlFor:"fullName",className:"mb-2 block text-sm font-medium text-slate-700",children:"Nome completo"}),d.jsx("input",{id:"fullName",type:"text",value:s,onChange:e=>a(e.target.value),placeholder:"Atualize seu nome",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-slate-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"})]}),d.jsx("button",{type:"submit",disabled:r,className:"w-full rounded-lg bg-blue-600 px-4 py-2 text-white transition hover:bg-blue-500 disabled:bg-blue-400",children:r?"Salvando...":"Salvar"}),l&&d.jsx("p",{className:"text-center text-sm text-slate-600",children:l})]}),(0,d.jsxs)("div",{className:"mt-8 flex flex-col items-center gap-2 border-t border-slate-200 pt-6",children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Sessao"}),d.jsx("button",{onClick:u,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:"Sair da conta"})]})]})})})},function(e){let t=(0,p.useRouter)(),[s,r]=(0,m.useState)(!0);return((0,m.useEffect)(()=>{let e=!0;x.Z.auth.getSession().then(({data:s})=>{e&&(s.session?r(!1):t.replace("/login"))});let{data:s}=x.Z.auth.onAuthStateChange((e,s)=>{s||t.replace("/login")});return()=>{e=!1,s.subscription.unsubscribe()}},[t]),s)?d.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-100",children:d.jsx("div",{className:"rounded-lg bg-white px-6 py-4 text-slate-600 shadow",children:"Carregando..."})}):d.jsx(a,{...e})}),g=(0,n.l)(r,"default"),S=(0,n.l)(r,"getStaticProps"),v=(0,n.l)(r,"getStaticPaths"),j=(0,n.l)(r,"getServerSideProps"),N=(0,n.l)(r,"config"),P=(0,n.l)(r,"reportWebVitals"),w=(0,n.l)(r,"unstable_getStaticProps"),y=(0,n.l)(r,"unstable_getStaticPaths"),_=(0,n.l)(r,"unstable_getStaticParams"),C=(0,n.l)(r,"unstable_getServerProps"),I=(0,n.l)(r,"unstable_getServerSideProps"),q=new i.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/dashboard",pathname:"/dashboard",bundlePath:"",filename:""},components:{App:c.default,Document:u()},userland:r})},4130:(e,t,s)=>{"use strict";let a;s.d(t,{O:()=>i,Z:()=>l});var r=s(4001);function i(){return a||(a=(0,r.createPagesBrowserClient)()),a}let l=i()},1096:(e,t,s)=>{"use strict";s.d(t,{t:()=>l});var a=s(4001);let r="https://phtfqtumdtqrxvtlxwwq.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBodGZxdHVtZHRxcnh2dGx4d3dxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0ODg1MTAsImV4cCI6MjA3NTA2NDUxMH0.bE94zxx9V9JAJyCshiGEiUoN0CiRRI-eTT1Aa7O6RJM";if(!r||!i)throw Error("Defina NEXT_PUBLIC_SUPABASE_URL e NEXT_PUBLIC_SUPABASE_ANON_KEY nas variaveis de ambiente.");function l(e){return(0,a.createPagesServerClient)(e,{supabaseUrl:r,supabaseKey:i})}},3293:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(997);s(6764);var r=s(6689);let i=require("@supabase/auth-helpers-react");var l=s(4130);function n({Component:e,pageProps:t}){let[s]=(0,r.useState)(()=>(0,l.O)());return a.jsx(i.SessionContextProvider,{supabaseClient:s,initialSession:t.initialSession,children:a.jsx(e,{...t})})}},6764:()=>{},4001:e=>{"use strict";e.exports=require("@supabase/auth-helpers-nextjs")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[777,342],()=>s(1434));module.exports=a})();