"use strict";(()=>{var e={};e.id=925,e.ids=[925],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},3450:(e,t,r)=>{r.r(t),r.d(t,{config:()=>m,default:()=>f,routeModule:()=>p});var n={};r.r(n),r.d(n,{default:()=>d});var i=r(1802),a=r(7153),s=r(6249);let o=require("@supabase/auth-helpers-nextjs"),u="https://phtfqtumdtqrxvtlxwwq.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBodGZxdHVtZHRxcnh2dGx4d3dxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0ODg1MTAsImV4cCI6MjA3NTA2NDUxMH0.bE94zxx9V9JAJyCshiGEiUoN0CiRRI-eTT1Aa7O6RJM";if(!u||!l)throw Error("Defina NEXT_PUBLIC_SUPABASE_URL e NEXT_PUBLIC_SUPABASE_ANON_KEY nas variaveis de ambiente.");async function d(e,t){let r=(0,o.createPagesServerClient)({req:e,res:t},{supabaseUrl:u,supabaseKey:l}),{data:{session:n}}=await r.auth.getSession();if(!n)return t.status(401).json({error:"Nao autenticado."});let i=n.user.id;if("GET"===e.method){let{data:e,error:n}=await r.from("profiles").select("full_name").eq("id",i).maybeSingle();return n?t.status(400).json({error:n.message}):t.status(200).json({full_name:e?.full_name||""})}if("PUT"===e.method){let{full_name:n}=e.body||{};if(void 0!==n&&"string"!=typeof n)return t.status(400).json({error:"O nome deve ser uma string."});let a="string"==typeof n?n.trim():null,{data:s,error:o}=await r.from("profiles").upsert({id:i,full_name:a||null},{onConflict:"id"}).select("full_name").single();return o?t.status(400).json({error:o.message}):t.status(200).json({full_name:s.full_name||""})}return t.setHeader("Allow",["GET","PUT"]),t.status(405).end("Method Not Allowed")}let f=(0,s.l)(n,"default"),m=(0,s.l)(n,"config"),p=new i.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/profile",pathname:"/api/profile",bundlePath:"",filename:""},userland:n})},7153:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},1802:(e,t,r)=>{e.exports=r(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var r=t(t.s=3450);module.exports=r})();